/**
 * @file main.c
 * Simple program to test the binary math functions.
 *
 * Notice: This file currently has memory leaks. You should
 * fix those leaks or you will find it hard to fix the memory
 * leaks in your functions.
 */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "binarymath.h"
#include <math.h>

void test_inc(const char *a);
void test_negate(const char *a);
void test_add(const char *a, const char *b);
void test_sub(const char *a, const char *b);

int main()
{
    char *zero = "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    char *minus1 = "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111";
    
    test_inc(zero);
    test_inc(minus1);
    test_inc("0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001");
    test_inc("0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111");
    test_inc("1111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
    test_inc("0000000000001101101000111110101011111100011010111100000000000011011010001111101010111111000110101111");

    test_negate(zero);
    test_negate(minus1);
    test_negate("0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110001");
    test_negate("1111111111111111111111111111111111111111111111111111111111111111111111111111111110110101110111010101");
    test_negate("0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110101"); 

    test_add(
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010001", 
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000101");
    test_add(
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111101010", 
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111101");
    test_add(
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001", 
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111101"); 
    test_add(
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111011100111",
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000101");

    test_sub(
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010001", 
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000101");
    test_sub(
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111101010", 
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111101");
    test_sub(
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001", 
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111101"); 
    test_sub(
        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111011100111",
        "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000101");

    return 0;
}

/**
 * This function ensures the test values are the correct size.
 * It is provided to be sure no invalid length strings are 
 * created.
 * \param a String to test
 */
void ensureSize(const char *a) 
{
    if(strlen(a) != BINARY_SIZE) 
    {
        printf("Warning! Value: %s\nis of length %zu\n", a, strlen(a));
    }
}

void test_inc(const char *a)
{
    ensureSize(a);
    char *b = inc(a);
    printf("inc(%s) = \n    %s\n", a, b);
    free(b);
}


void test_negate(const char *a)
{
    ensureSize(a);
    
    char *b = negate(a);
    printf("negate(%s) = \n       %s\n", a, b);
    free(b);
}

void test_add(const char *a, const char *b)
{
    ensureSize(a);
    ensureSize(b);
    
    char *c = add(a, b);
    printf("add(%s, \n   %s) = \n    %s\n", a, b, c);
    free(c);
}


void test_sub(const char *a, const char *b)
{
    ensureSize(a);
    ensureSize(b);

    char *c = sub(a, b);
    printf("sub(%s, \n    %s) = \n    %s\n", a, b, c);
    free(c);
}

